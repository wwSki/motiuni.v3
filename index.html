<!DOCTYPE html>
<html lang="ro">
    <head>
        <meta charset="UTF-8" />
        <title>Generator de mo»õiuni</title>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
            
            :root {
                --bg-color: #0a0a0a;
                --text-color: #ffffff;
                --card-bg: #1a1a1a;
                --border-color: #333;
                --primary-color: #E9967A;
                --primary-hover: #D18D6D;
                --secondary-color: #666;
                --infoslide-bg: rgba(255, 160, 122, 0.1);
                --placeholder-color: #888;
                --container-width: 1400px;
                --sidebar-width: 320px;
                --copied-bg: rgba(255, 160, 122, 0.2);
                --bg-pattern: linear-gradient(45deg, #1a1a1a 2%, transparent 25%, transparent 75%, #1a1a1a 98%),
                              linear-gradient(45deg, #1a1a1a 2%, transparent 25%, transparent 75%, #1a1a1a 98%);
                --bg-size: 6px 6px;
                --bg-position: 0 0, 3px 3px;
            }
            
            [data-theme="light"] {
                --bg-color: #f8f9fa;
                --text-color: #2d3436;
                --card-bg: #ffffff;
                --border-color: #ced4da;
                --primary-color: #1E90FF;
                --primary-hover: #0066CC;
                --secondary-color: #495057;
                --infoslide-bg: rgba(30, 144, 255, 0.1);
                --copied-bg: rgba(30, 144, 255, 0.15);
                --bg-pattern: linear-gradient(45deg, #f0f0f0 2%, transparent 25%, transparent 75%, #f0f0f0 98%),
                              linear-gradient(45deg, #f0f0f0 2%, transparent 25%, transparent 75%, #f0f0f0 98%);
            }
            
            * {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
                font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            }
            
            body {
                background: var(--bg-pattern), var(--bg-color);
                background-size: var(--bg-size);
                background-position: var(--bg-position);
                color: var(--text-color);
                line-height: 1.6;
                padding: 2rem;
                min-height: 100vh;
                position: relative;
            }
            
            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.03);
                z-index: -1;
            }
            
            header {
                text-align: center;
                margin-bottom: 2.5rem;
                padding: 1rem;
                border-bottom: 1px solid var(--border-color);
                position: relative;
            }
            
            header h1 {
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 0.5rem;
            }
            
            .theme-toggle {
                position: absolute;
                top: 1.5rem;
                right: 1.5rem;
                padding: 0.75rem 1.25rem;
                border: none;
                border-radius: 8px;
                background: var(--primary-color);
                color: #2d3436;
                cursor: pointer;
                font-weight: 500;
                transition: filter 0.2s;
            }
            
            .theme-toggle:hover {
                filter: brightness(0.95);
            }
            
            .container {
                display: flex;
                gap: 2rem;
                max-width: var(--container-width);
                margin: 0 auto;
            }
            
            .sidebar {
                width: var(--sidebar-width);
                background: rgba(26, 26, 26, 0.9);
                backdrop-filter: blur(10px);
                border-radius: 12px;
                padding: 1.5rem;
                position: sticky;
                top: 2rem;
                height: fit-content;
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
                transition: background 0.4s ease, backdrop-filter 0.4s ease, border-color 0.4s ease;
            }
            
            .tabs {
                display: flex;
                gap: 0.5rem;
                margin-bottom: 1.5rem;
            }
            
            .tabs button {
                flex: 1;
                padding: 0.75rem;
                border: none;
                background: var(--border-color);
                color: var(--text-color);
                font-weight: 600;
                border-radius: 8px;
                cursor: pointer;
                transition: filter 0.2s;
            }
            
            .tabs button.active {
                background: var(--primary-color);
                color: #fff;
            }
            
            .tabs button:hover {
                filter: brightness(0.9);
            }
            
            .criteria label {
                display: block;
                margin: 1rem 0 0.5rem;
                font-size: 0.9rem;
                color: var(--secondary-color);
                font-weight: 500;
            }
            
            .criteria select, .criteria button {
                width: 100%;
                padding: 0.75rem;
                border: 1px solid var(--border-color);
                border-radius: 8px;
                background: var(--card-bg);
                color: var(--text-color);
                font-size: 0.95rem;
                transition: border-color 0.2s;
            }
            
            #generateBtn {
                background: var(--primary-color);
                border: none;
                margin-top: 1.5rem;
                font-weight: 600;
                color: #2d3436;
                cursor: pointer;
            }
            
            #generateBtn:hover {
                background: var(--primary-hover);
            }
            
            .content {
                flex: 1;
                background: rgba(26, 26, 26, 0.85);
                backdrop-filter: blur(8px);
                border-radius: 12px;
                padding: 2rem;
                border: 1px solid rgba(255, 255, 255, 0.08);
                transition: background 0.4s ease, backdrop-filter 0.4s ease, border-color 0.4s ease;
            }
            
            .motion {
                background: rgba(255, 255, 255, 0.05) !important;
                backdrop-filter: blur(4px);
                border-radius: 8px;
                padding: 1.5rem;
                margin-bottom: 1rem;
                border: 1px solid var(--border-color);
                transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                cursor: pointer;
                position: relative;
            }
            
            .motion:hover {
                transform: translateY(-3px);
                box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
            }
            
            .motion.copied {
                background-color: var(--copied-bg);
                border-color: var(--primary-color);
            }
            
            .motion p {
                font-size: 1.1rem;
                margin-bottom: 0.75rem;
                line-height: 1.5;
            }
            
            .motion small {
                color: var(--secondary-color);
                font-size: 0.9rem;
                display: block;
                margin-bottom: 1rem;
            }
            
            .infoslide-toggle {
                background: var(--border-color);
                border: none;
                color: var(--text-color);
                padding: 0.5rem 1rem;
                border-radius: 6px;
                cursor: pointer;
                font-size: 0.9rem;
                margin-top: 0.5rem;
                transition: filter 0.2s;
            }
            
            .infoslide-toggle:hover {
                filter: brightness(0.9);
            }
            
            .infoslide-content {
                background: var(--infoslide-bg);
                padding: 1rem;
                border-radius: 6px;
                margin-top: 1rem;
                display: none;
                border-left: 3px solid var(--primary-color);
            }
            
            .motion-count {
                background: var(--primary-color);
                color: #2d3436;
                padding: 12px 20px;
                border-radius: 8px 0 0 8px;
                font-size: 0.95rem;
                position: fixed;
                bottom: 30px;
                right: 0;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                z-index: 100;
                display: flex;
                align-items: center;
                gap: 8px;
            }
            
            [data-theme="light"] {
                .sidebar {
                    background: rgba(255, 255, 255, 0.92) !important;
                    border: 1px solid rgba(0, 0, 0, 0.05);
                }
            
                .content {
                    background: rgba(255, 255, 255, 0.88) !important;
                    border: 1px solid rgba(0, 0, 0, 0.03);
                }
            
                .motion {
                    background: rgba(0, 0, 0, 0.02) !important;
                }
            
                .motion:hover {
                    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
                }
            
                .tabs button {
                    background: #e9ecef;
                    color: #495057;
                }
            
                .tabs button.active {
                    background: var(--primary-color);
                    color: white;
                }
            
                .infoslide-toggle {
                    background: #dee2e6;
                    color: #495057;
                }
            
                #generateBtn {
                    color: white;
                }
            
                .motion-count {
                    color: white !important;
                }
            }
            
            /* Media queries actualizate pentru aspect ratio */
            @media (max-width: 1200px) {
                .container {
                    max-width: 100%;
                    padding: 0 20px;
                }
            
                .sidebar {
                    width: 300px;
                }
            }
            
            @media (max-width: 768px), (max-aspect-ratio: 1.2) {
                /* Variabile pentru scalare dinamica */
                :root {
                    --text-scale: calc(0.3vw + 0.3vh + 0.5vmin); /* Formula hibrida */
                    --base-size: clamp(14px, var(--text-scale) * 30, 24px);
                }

                /* Layout general */
                body {
                    padding: 2vmax;
                    font-size: var(--base-size);
                    line-height: 1.6;
                }

                .container {
                    flex-direction: column;
                    gap: clamp(15px, 3vmax, 30px);
                    padding: 0 clamp(10px, 2vw, 20px);
                }

                /* Header */
                header {
                    padding-right: clamp(80px, 25vw, 150px);
                    min-height: clamp(70px, 15vmin, 100px);
                    margin-bottom: clamp(1rem, 3vmax, 2rem);
                }

                header h1 {
                    font-size: clamp(1.8rem, 6vw, 2.8rem) !important;
                    line-height: 1.25;
                    max-width: 90%;
                }

                /* Sidebar si content */
                .sidebar, .content {
                    width: 100%;
                    padding: clamp(15px, 3vw, 25px);
                    border-radius: clamp(8px, 1.5vw, 12px);
                }

                /* Elemente mo»õiuni */
                .motion {
                    padding: clamp(15px, 3vw, 25px);
                    margin-bottom: clamp(15px, 3vmin, 25px);
                }

                .motion p {
                    font-size: clamp(1.2rem, 4.5vw, 1.8rem);
                    line-height: 1.5;
                    margin-bottom: clamp(0.5rem, 2vmin, 1rem);
                }

                .motion small {
                    font-size: clamp(0.9rem, 3vw, 1.2rem);
                    margin-bottom: clamp(1rem, 3vmin, 1.5rem);
                }

                /* Butoane si elemente interactive */
                .theme-toggle {
                    font-size: clamp(1rem, 3.5vw, 1.4rem) !important;
                    padding: clamp(8px, 1.5vw, 12px) clamp(12px, 2.5vw, 20px) !important;
                    right: clamp(10px, 2vw, 20px);
                }

                .infoslide-toggle {
                    font-size: clamp(1rem, 4vw, 1.5rem) !important;
                    padding: clamp(8px, 2vw, 12px) clamp(12px, 3vw, 20px) !important;
                    margin-top: clamp(0.5rem, 2vmin, 1rem);
                }

                .infoslide-content {
                    font-size: clamp(1rem, 3.5vw, 1.4rem);
                    padding: clamp(10px, 2vw, 15px);
                    line-height: 1.5;
                }

                /* Form elements */
                .criteria select, #generateBtn {
                    font-size: clamp(1rem, 4vw, 1.5rem) !important;
                    padding: clamp(10px, 2vw, 15px) !important;
                    margin: clamp(5px, 1vmin, 10px) 0;
                }

                #generateBtn {
                    margin-top: clamp(1rem, 4vmin, 2rem);
                }

                .tabs button {
                    font-size: clamp(1rem, 3.5vw, 1.4rem);
                    padding: clamp(10px, 2vw, 15px);
                }

                /* Counter »ôi versiune */
                .motion-count {
                    font-size: clamp(1.1rem, 4.5vw, 1.6rem) !important;
                    padding: clamp(12px, 2.5vw, 16px) clamp(20px, 4vw, 24px) !important;
                }

                #version {
                    font-size: clamp(0.6rem, 2vw, 0.8rem) !important;
                    margin: clamp(0.3rem, 1vw, 0.5rem) !important;
                }

                .criteria select, .criteria input, .criteria button, .advanced-filter-toggle {
                    font-size: clamp(1rem, 4vw, 1.5rem) !important;
                    padding: clamp(10px, 2vw, 15px) !important;
                }



                /* AjustƒÉri pentru aspect ratio extrem */
                @media (orientation: landscape) and (max-height: 500px) {
                    :root {
                        --text-scale: calc(0.4vh + 0.2vmin); /* Prioritate pe verticala */
                    }
                    
                    header h1 {
                        font-size: clamp(1.5rem, 5vh, 2rem) !important;
                    }
                    
                    .container {
                        gap: clamp(10px, 2vmax, 20px);
                    }
                }

                /* Protec»õie pentru foldable devices */
                @media (min-aspect-ratio: 3/4) and (max-aspect-ratio: 4/3) {
                    :root {
                        --text-scale: calc(0.25vw + 0.25vh + 0.5vmin);
                    }
                }
            }
        
            #version {
                position: fixed !important;
                bottom: 0 !important;
                left: 0 !important;
                margin: 1rem;
                padding: 0;
                font-family: 'Poppins', sans-serif;
                font-size: 1rem !important;
                color: #66666699;
                z-index: 9999;
                user-select: none;
                pointer-events: none;
            }
        
            [data-theme="light"] #version {
                color: #888888cc;
            }
        
            @media (max-width: 768px) {
                #version {
                    font-size: 0.5rem !important;
                    margin: 2px;
                }
            }
        
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(8px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        
            .motion {
                animation: fadeIn 0.2s ease-out;
                opacity: 0;
                animation-fill-mode: forwards;
            }
        
            .motion:hover {
                transform: translateY(-3px);
                box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
            }

            .criteria select, .criteria button, .criteria input {
                width: 100%;
                padding: 0.75rem;
                border: 1px solid var(--border-color);
                border-radius: 8px;
                background: var(--card-bg);
                color: var(--text-color);
                font-size: 0.95rem;
                transition: border-color 0.2s;
            }

            .advanced-filter-toggle {
                display: inline-block;
                background: var(--border-color);
                color: var(--text-color);
                border: none;
                border-radius: 8px;
                padding: 0.75rem;
                width: 100%;
                text-align: center;
                font-size: 0.95rem;
                font-weight: 600;
                cursor: pointer;
                margin-top: 1.5rem;
                transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            }

            .advanced-filter-toggle:hover {
                background: var(--primary-hover);
                transform: translateY(-1px);
                color: #fff;
            }

            .advanced-filter-toggle-checkbox:checked + .advanced-filter-toggle {
                background: var(--primary-color);
                color: #fff;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            }
        </style>
    </head>
    <body>
        <header>
            <h1>Generator de mo»õiuni</h1>
            <button id="themeToggle" class="theme-toggle">üåû Light Mode</button>
        </header>
        <div class="container">
            <div class="sidebar">
                <!-- Taburi -->
                <div class="tabs">
                    <button id="tab-random" class="active">Random</button>
                    <button id="tab-list">ListƒÉ</button>
                </div>
                <!-- Criterii -->
                <div class="criteria">
                    <!-- Tema -->
                    <label for="theme">Tema:</label>
                    <select id="theme">
                        <option value="all">Toate</option>
                        <!-- Vom popula op»õiunile pe baza mapping-ului -->
                    </select>
                    <!-- Limba -->
                    <label for="language">Limba:</label>
                    <select id="language">
                        <option value="all">Toate</option>
                        <option value="Engleza">Engleza</option>
                        <option value="Romana">Romana</option>
                    </select>
                    <!-- Nivel -->
                    <label for="level">Nivel:</label>
                    <select id="level">
                        <option value="both">Toate</option>
                        <option value="Incepator">√éncepƒÉtor</option>
                        <option value="General">General</option>
                    </select>
                    <!-- Competi»õie -->
                    <label for="competition">Competi»õie:</label>
                    <select id="competition">
                        <option value="all">Toate</option>
                        <!-- Op»õiunile vor fi populate din mapping-ul de competi»õii -->
                    </select>
                    <!-- Infoslide -->
                    <label for="infoslide">Infoslide:</label>
                    <select id="infoslide">
                        <option value="both">Toate</option>
                        <option value="with">Cu infoslide</option>
                        <option value="without">FƒÉrƒÉ infoslide</option>
                    </select>
                    <!-- PregƒÉtire -->
                    <label for="preparation">PregƒÉtire:</label>
                    <select id="preparation">
                        <option value="all">Toate</option>
                    </select>
                    <!-- Butonul de generare (se folose»ôte doar pentru tab-ul Random) -->
                    <button id="generateBtn">GenereazƒÉ</button>

                    <input type="checkbox" id="advancedFilterToggle" class="advanced-filter-toggle-checkbox" hidden>
                    <label for="advancedFilterToggle" class="advanced-filter-toggle">Filtre avansate</label>
                    <div id="advancedFilters">
                        <label for="filterMotionWord">Cuv√¢nt √Æn mo»õiune:</label>
                        <input type="text" id="filterMotionWord" placeholder="ex: Joel">

                        <label for="filterInfoslideWord">Cuv√¢nt √Æn infoslide:</label>
                        <input type="text" id="filterInfoslideWord" placeholder="ex: demiurg">

                        <label for="filterCATeamWord">Cuv√¢nt √Æn CA Team:</label>
                        <input type="text" id="filterCATeamWord" placeholder="ex: Livia Rusu">
                    </div>
                </div>
            </div>
            <div class="content">
                <div id="result">
                    <!-- Rezultatele vor fi afi»ôate aici -->
                </div>
            </div>
        </div>

        <script>
                const themesMapping = [
                  { key: 'Afaceri', representativeTheme: 'Afaceri', displayName: 'Afaceri' },
                  { key: 'Arta si Cultura', representativeTheme: 'ArtƒÉ »ôi CulturƒÉ', displayName: 'ArtƒÉ »ôi CulturƒÉ' },
                  { key: 'ArtƒÉ/CulturƒÉ', representativeTheme: 'ArtƒÉ »ôi CulturƒÉ', displayName: 'ArtƒÉ »ôi CulturƒÉ' },
                  { key: 'Dezvoltare', representativeTheme: 'Dezvoltare', displayName: 'Dezvoltare' },
                  { key: 'Drepturile Animalelor', representativeTheme: 'Drepturile Animalelor', displayName: 'Drepturile Animalelor' },
                  { key: 'Economie', representativeTheme: 'Economie »ôi Finan»õe', displayName: 'Economie »ôi Finan»õe' },
                  { key: 'Economie/Finance', representativeTheme: 'Economie »ôi Finan»õe', displayName: 'Economie »ôi Finan»õe' },
                  { key: 'Educatie', representativeTheme: 'Educa»õie', displayName: 'Educa»õie' },
                  { key: 'Educa»õie', representativeTheme: 'Educa»õie', displayName: 'Educa»õie' },
                  { key: 'Experienta Umana?', representativeTheme: 'Experien»õƒÉ UmanƒÉ', displayName: 'Experien»õƒÉ UmanƒÉ' },
                  { key: 'Experien»õa UmanƒÉ', representativeTheme: 'Experien»õƒÉ UmanƒÉ', displayName: 'Experien»õƒÉ UmanƒÉ' },
                  { key: 'Familie', representativeTheme: 'Familie', displayName: 'Familie' },
                  { key: 'Feminism', representativeTheme: 'Feminism', displayName: 'Feminism' },
                  { key: 'Istorie', representativeTheme: 'Istorie', displayName: 'Istorie' },
                  { key: 'Justitie', representativeTheme: 'Justi»õie', displayName: 'Justi»õie' },
                  { key: 'Justi»õie', representativeTheme: 'Justi»õie', displayName: 'Justi»õie' },
                  { key: 'LGBT+', representativeTheme: 'LGBT+', displayName: 'LGBT+' },
                  { key: 'Libertati', representativeTheme: 'LibertƒÉ»õi', displayName: 'LibertƒÉ»õi' },
                  { key: 'LibertƒÉ»õi', representativeTheme: 'LibertƒÉ»õi', displayName: 'LibertƒÉ»õi' },
                  { key: 'LOL', representativeTheme: 'LOL', displayName: 'LOL' },
                  { key: 'Mass/Social Media', representativeTheme: 'Mass/Social Media', displayName: 'Mass/Social Media' },
                  { key: 'Medicina', representativeTheme: 'MedicinƒÉ', displayName: 'MedicinƒÉ' },
                  { key: 'MedicinƒÉ', representativeTheme: 'MedicinƒÉ', displayName: 'MedicinƒÉ' },
                  { key: 'Mediu', representativeTheme: 'Mediu', displayName: 'Mediu' },
                  { key: 'Minoritati', representativeTheme: 'MinoritƒÉ»õi', displayName: 'MinoritƒÉ»õi' },
                  { key: 'MinoritƒÉ»õi', representativeTheme: 'MinoritƒÉ»õi', displayName: 'MinoritƒÉ»õi' },
                  { key: 'Moralitate', representativeTheme: 'Moralitate', displayName: 'Moralitate' },
                  { key: 'Politica', representativeTheme: 'PoliticƒÉ', displayName: 'PoliticƒÉ' },
                  { key: 'PoliticƒÉ', representativeTheme: 'PoliticƒÉ', displayName: 'PoliticƒÉ' },
                  { key: 'Politici Sociale', representativeTheme: 'Politici Sociale', displayName: 'Politici Sociale' },
                  { key: 'Relatii Internationale', representativeTheme: 'Rela»õii Interna»õionale', displayName: 'Rela»õii Interna»õionale' },
                  { key: 'Rela»õii Interna»õionale', representativeTheme: 'Rela»õii Interna»õionale', displayName: 'Rela»õii Interna»õionale' },
                  { key: 'Rela»õii/Cupluri', representativeTheme: 'Rela»õii/Cupluri', displayName: 'Rela»õii/Cupluri' },
                  { key: 'Religie', representativeTheme: 'Religie', displayName: 'Religie' },
                  { key: 'Securitate Razboi si Armata', representativeTheme: 'Securitate, RƒÉzboi »ôi ArmatƒÉ', displayName: 'Securitate, RƒÉzboi »ôi ArmatƒÉ' },
                  { key: 'Securitate/RƒÉzboi/ArmatƒÉ', representativeTheme: 'Securitate, RƒÉzboi »ôi ArmatƒÉ', displayName: 'Securitate, RƒÉzboi »ôi ArmatƒÉ' },
                  { key: 'SF', representativeTheme: 'SF', displayName: 'SF' },
                  { key: 'Sport', representativeTheme: 'Sport', displayName: 'Sport' },
                  { key: 'Stiinta si tehnologie', representativeTheme: '»òtiin»õƒÉ »ôi Tehnologie', displayName: '»òtiin»õƒÉ »ôi Tehnologie' },
                  { key: '»òtiin»õƒÉ »ôi Tehnologie', representativeTheme: '»òtiin»õƒÉ »ôi Tehnologie', displayName: '»òtiin»õƒÉ »ôi Tehnologie' },
                  { key: 'Terorism', representativeTheme: 'Terorism', displayName: 'Terorism' },
                  { key: 'Trenduri Sociale', representativeTheme: 'Trenduri Sociale', displayName: 'Trenduri Sociale' }
                ];

                const competitionsMapping = [
                  { key: 'AES Spring Open', displayName: 'AES Spring Open', aliases: ['Spring Open', 'AES Spring'] },
                  { key: 'ARGO Masters', displayName: 'ARGO Masters', aliases: ['ARGO Masters'] },
                  { key: 'ARGO Open', displayName: 'ARGO Open', aliases: ['ARGO Open'] },
                  { key: 'ARGO Premiership', displayName: 'ARGO Premiership', aliases: ['ARGO Premiership'] },
                  { key: 'Black Sea Open', displayName: 'Black Sea Open', aliases: ['Black Sea Open'] },
                  { key: 'Brasovul Dezbate', displayName: 'Brasovul Dezbate', aliases: ['Brasovul Dezbate'] },
                  { key: 'BTDR', displayName: 'BTDR', aliases: ['BTDR'] },
                  { key: 'Bucovina Open', displayName: 'Bucovina Open', aliases: ['Bucovina Open'] },
                  { key: 'Campina Impropmtu Open', displayName: 'Campina Impropmtu Open', aliases: ['Campina', 'Campina Impropmtu Open'] },
                  { key: 'Cantemir Debate Extravaganza', displayName: 'Cantemir Debate Extravaganza', aliases: ['Extravaganza', 'Cantemir Debate Extravaganza'] },
                  { key: 'CDX', displayName: 'CDX', aliases: ['CDX'] },
                  { key: 'Central Open', displayName: 'Central Open', aliases: ['Central Open'] },
                  { key: 'Chisinau Open', displayName: 'Chisinau Open', aliases: ['Chisinau Open'] },
                  { key: 'Chropen', displayName: 'Chropen', aliases: ['Chropen'] },
                  { key: 'Cluj Open', displayName: 'Cluj Open', aliases: ['Cluj Open'] },
                  { key: 'Cupa Liceelor Prahovene', displayName: 'Cupa Liceelor Prahovene', aliases: ['Cupa Liceelor Prahovene'] },
                  { key: 'Debatopalooza', displayName: 'Debatopalooza', aliases: ['Debatopalooza'] },
                  { key: 'Deva Cup', displayName: 'Deva Cup', aliases: ['Deva Cup'] },
                  { key: 'Deva Open', displayName: 'Deva Open', aliases: ['Deva Open'] },
                  { key: 'Dezbatem Romania', displayName: 'Dezbatem Romania', aliases: ['Dezbatem Romania'] },
                  { key: 'Edu Debate Revolution', displayName: 'Edu Debate Revolution', aliases: ['Edu Debate Revolution'] },
                  { key: 'European Schools debating championship', displayName: 'European Schools debating championship', aliases: ['European Schools debating championship'] },
                  { key: 'Fiat!', displayName: 'Fiat!', aliases: ['Fiat'] },
                  { key: 'FNDA', displayName: 'FNDA', aliases: ['FNDA', 'Forumul National', 'Forumul Na»õional', 'Forumul'] },
                  { key: 'Foc»ôani Mixt Team Open', displayName: 'Foc»ôani Mixt Team Open', aliases: ['Foc»ôani Mixt Team Open'] },
                  { key: 'FRDA', displayName: 'FRDA', aliases: ['FRDA', 'Forumul Regional'] },
                  { key: 'Funky Debates', displayName: 'Funky Debates', aliases: ['Funky Debates', 'Funky'] },
                  { key: 'HD Open', displayName: 'HD Open', aliases: ['HD Open'] },
                  { key: 'Iasi Open', displayName: 'Iasi Open', aliases: ['Iasi Open'] },
                  { key: 'Interact Sf√¢ntul Sava Debate Competition', displayName: 'Interact Sf√¢ntul Sava Debate Competition', aliases: ['Interact Sf√¢ntul Sava Debate Competition'] },
                  { key: 'InterDebate Timi»ôoara', displayName: 'InterDebate Timi»ôoara', aliases: ['InterDebate Timi»ôoara', 'InterDebate'] },
                  { key: 'LDCembrie', displayName: 'LDCembrie', aliases: ['LDC'] },
                  { key: 'MMO', displayName: 'MMO', aliases: ['MMO'] },
                  { key: 'Pache Open', displayName: 'Pache Open', aliases: ['Pache'] },
                  { key: 'Padawans', displayName: 'Padawans', aliases: ['Padawans'] },
                  { key: 'Premiership', displayName: 'Premiership', aliases: ['Premiership'] },
                  { key: 'PTA', displayName: 'PTA', aliases: ['PTA'] },
                  { key: 'Racovita Open', displayName: 'Racovita Open', aliases: ['Racovita Open'] },
                  { key: 'Ramnicu Sarat Open', displayName: 'Ramnicu Sarat Open', aliases: ['Ramnicu Sarat Open'] },
                  { key: 'Regionala Muntenia', displayName: 'Regionala Muntenia', aliases: ['Regionala Muntenia'] },
                  { key: 'Saint George', displayName: 'Saint George', aliases: ['Saint George'] },
                  { key: 'Sava', displayName: 'Sava', aliases: ['Sava'] },
                  { key: 'Selectie WSDC', displayName: 'Selectie WSDC', aliases: ['Selectie WSDC'] },
                  { key: 'Sinaia Mixed Teams Open', displayName: 'Sinaia Mixed Teams Open', aliases: ['Sinaia Mixed Teams Open'] },
                  { key: 'TM Open', displayName: 'TM Open', aliases: ['TM Open', 'Timisoara Open', 'Timi»ôoara Open'] }, 
                  { key: 'Transilvania College Open', displayName: 'Transilvania College Open', aliases: ['Transilvania College Open'] },
                  { key: 'Transylvania New Generation Cup', displayName: 'Transylvania New Generation Cup', aliases: ['Transylvania New Generation Cup'] },
                  { key: 'UN Open', displayName: 'UN Open', aliases: ['UN Open'] },
                  { key: 'UN Youth Open', displayName: 'UN Youth Open', aliases: ['UN Youth Open'] },
                  { key: 'Winter MO', displayName: 'Winter MO', aliases: ['Winter MO'] },
                  { key: 'Zenith Opoen', displayName: 'Zenith Opoen', aliases: ['Zenith Opoen'] }
                ];

               // Variabile globale
                let motionsData = [];
                let currentTab = "random";

                // Ini»õializare aplica»õie
                function init() {
                    setupTheme();
                    setupEventListeners();
                    populateDropdowns();
                    loadMotions();
                }

                // Setare temƒÉ ini»õialƒÉ
                function setupTheme() {
                    const savedTheme = localStorage.getItem('theme') || 'dark';
                    document.body.setAttribute('data-theme', savedTheme);
                    updateThemeButton();
                }

                // ActualizeazƒÉ butonul temei
                function updateThemeButton() {
                    const btn = document.getElementById('themeToggle');
                    const theme = document.body.getAttribute('data-theme') || 'dark';
                    btn.textContent = theme === 'dark' ? 'üåû Light Mode' : 'üåô Dark Mode';
                }

                // Evenimente globale
                function setupEventListeners() {
                    document.getElementById('themeToggle').addEventListener('click', toggleTheme);
                    document.getElementById('tab-random').addEventListener('click', () => switchTab('random'));
                    document.getElementById('tab-list').addEventListener('click', () => switchTab('list'));
                    document.getElementById('generateBtn').addEventListener('click', generateRandomMotion);
                    document.querySelectorAll('.criteria select, .criteria input').forEach(el => {
                        el.addEventListener('change', handleFilterChange);
                        el.addEventListener('input', handleFilterChange);
                    });
                    // Advanced filters toggle
                    document.getElementById('advancedFilterToggle').addEventListener('change', () => {
                        const adv = document.getElementById('advancedFilters');
                        adv.style.display = document.getElementById('advancedFilterToggle').checked ? 'block' : 'none';
                        handleFilterChange();
                    });
                }

                // Schimbare temƒÉ
                function toggleTheme() {
                    const newTheme = document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                    document.body.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    updateThemeButton();
                }

                // Schimbare tab
                function switchTab(tab) {
                    currentTab = tab;
                    document.querySelectorAll('.tabs button').forEach(btn => btn.classList.remove('active'));
                    document.getElementById(`tab-${tab}`).classList.add('active');
                    document.getElementById('generateBtn').style.display = tab === 'random' ? 'block' : 'none';
                    updateResults();
                }

                // √éncƒÉrcare date
                async function loadMotions() {
                    try {
                        const response = await fetch('motions.json');
                        motionsData = await response.json();
                        // AdƒÉugare validare
                        if (!Array.isArray(motionsData)) throw new Error('Format invalid');
                    } catch (error) {
                        console.error('Eroare la √ÆncƒÉrcarea datelor:', error);
                        // Afi»ôare mesaj utilizator
                    }
                }

                // Populare dropdown-uri
                function populateDropdowns() {
                    populateThemes();
                    populateCompetitions();
                    populatePreparation();
                }

                function populateThemes() {
                    const select = document.getElementById('theme');
                    const uniqueThemes = [...new Set(themesMapping.map(t => t.displayName))];
                    uniqueThemes.forEach(theme => {
                        select.appendChild(createOption(theme));
                    });
                }

                function populateCompetitions() {
                    const select = document.getElementById('competition');
                    competitionsMapping.forEach(comp => {
                        select.appendChild(createOption(comp.displayName));
                    });
                }

                function populatePreparation() {
                    const select = document.getElementById('preparation');
                    ['Prepared', 'Impromptu'].forEach(opt => {
                        select.appendChild(createOption(opt));
                    });
                }

                function createOption(value) {
                    const option = document.createElement('option');
                    option.value = value;
                    option.textContent = value;
                    return option;
                }

                // Filtrare mo»õiuni
                function filterMotions() {
                    const advancedEnabled = document.getElementById('advancedFilterToggle').checked;
                    return motionsData.filter(motion => {
                        const base = (
                            checkThemeFilter(motion) &&
                            checkLanguageFilter(motion) &&
                            checkLevelFilter(motion) &&
                            checkCompetitionFilter(motion) &&
                            checkInfoslideFilter(motion) &&
                            checkPreparationFilter(motion)
                        );
                        if (!advancedEnabled) return base;
                        return base &&
                            checkMotionWordFilter(motion) &&
                            checkInfoslideWordFilter(motion) &&
                            checkCATeamWordFilter(motion);
                    });
                }

                function checkThemeFilter(motion) {
                const selected = document.getElementById('theme').value;
                if (selected === "all") return true;

                // Extrage toate temele din motion
                const motionThemes = [
                    motion["TEMA"],
                    motion["TEMA 1"],
                    motion["TEMA 2"],
                    motion["TEMA 3"],
                    motion["Tema 1"],
                    motion["Tema 2"],
                    motion["Tema 3"]
                ].filter(Boolean).flatMap(t => t.split(',').map(t => t.trim()));

                // VerificƒÉ potrivirea cu mapping-ul
                return motionThemes.some(motionTheme =>
                    themesMapping.some(theme =>
                        theme.key.toLowerCase() === motionTheme.toLowerCase() &&
                        theme.displayName === selected
                    )
                );
            }

                function checkLanguageFilter(motion) {
                    const selected = document.getElementById('language').value;
                    return selected === 'all' || motion.LIMBA?.toLowerCase() === selected.toLowerCase();
                }

                function checkLevelFilter(motion) {
                    const selected = document.getElementById('level').value;
                    return selected === 'both' || motion.NIVEL?.toLowerCase() === selected.toLowerCase();
                }

                function checkCompetitionFilter(motion) {
                    const selected = document.getElementById('competition').value;
                    if (selected === 'all') return true;

                    const competition = competitionsMapping.find(c => c.displayName === selected);
                    return competition.aliases.some(alias =>
                        motion['Nume Comp.']?.toLowerCase().includes(alias.toLowerCase())
                    );
                }

                function checkInfoslideFilter(motion) {
                    const selected = document.getElementById('infoslide').value;
                    if (selected === 'both') return true;

                    // 1. IdentificƒÉ toate c√¢mpurile care con»õin informa»õii relevante
                    const infoFields = Object.keys(motion).filter(key => 
                        key.toLowerCase().includes('info') || 
                        key.toLowerCase().includes('infoslide') ||
                        key.toLowerCase().includes('context')
                    );

                    // 2. Extrage »ôi combinƒÉ con»õinutul din toate c√¢mpurile relevante
                    const combinedContent = infoFields
                        .map(field => (motion[field] || '').toString().trim())
                        .join(' ')
                        .trim();

                    // 3. VerificƒÉ dacƒÉ con»õine con»õinut valid
                    const hasValidInfo = () => {
                        if (combinedContent.length === 0) return false;
                        
                        // 4. IgnorƒÉ rƒÉspunsurile neconcludente
                        const invalidPatterns = [
                            /^none$/i,
                            /^n\/?a$/i,
                            /^-+$/,
                            /^no info$/i,
                            /^not applicable$/i,
                            /^context:?\s*$/i
                        ];
                        
                        return !invalidPatterns.some(pattern => 
                            pattern.test(combinedContent)
                        );
                    };

                    return selected === 'with' ? hasValidInfo() : !hasValidInfo();
                }

                // Filtrul nou pentru P/I
                function checkPreparationFilter(motion) {
                    const selected = document.getElementById('preparation').value;
                    return selected === 'all' || motion['P/I']?.toLowerCase() === selected.toLowerCase();
                }

                // New check functions
                function checkMotionWordFilter(motion) {
                    const kw = document.getElementById('filterMotionWord').value.trim().toLowerCase();
                    return !kw || (motion['Mo»õiune'] || '').toLowerCase().includes(kw);
                }
                function checkInfoslideWordFilter(motion) {
                    const kw = document.getElementById('filterInfoslideWord').value.trim().toLowerCase();
                    const text = (motion['INFOs.'] || '').toString().toLowerCase();
                    return !kw || text.includes(kw);
                }
                function checkCATeamWordFilter(motion) {
                    const kw = document.getElementById('filterCATeamWord').value.trim().toLowerCase();
                    const text = (motion['CA Team'] || '').toString().toLowerCase();
                    return !kw || text.includes(kw);
                }

                // Afi»ôare rezultate
                function updateResults() {
                    const filtered = filterMotions();
                    if (currentTab === 'list') {
                        showMotionsList(filtered);
                    } else {
                        clearResults();
                    }
                    updateCounter(filtered.length);
                }

                function generateRandomMotion() {
                    const filtered = filterMotions();
                    const result = filtered.length ? [filtered[Math.floor(Math.random() * filtered.length)]] : [];
                    showMotions(result);
                    updateCounter(filtered.length);
                }

                function showMotionsList(motions) {
                    showMotions(motions.map((m, i) => ({ ...m, number: i + 1 })));
                }

                function showMotions(motions) {
                  const resultDiv = document.getElementById('result');
                  resultDiv.innerHTML = motions.map(motion => `
                    <div class="motion">
                        ${motion.number ? `<div class="motion-number">${motion.number}.</div>` : ''}
                        <p class="motion-text">${motion['Mo»õiune'] || 'FƒÉrƒÉ mo»õiune'}</p>
                        <small>${motion.Data || ''}</small>
                        ${motion['INFOs.']?.trim() ? `
                            <button class="infoslide-toggle" onclick="toggleInfoslide(this)">Infoslide</button>
                            <div class="infoslide-content">${motion['INFOs.']}</div>
                        ` : ''}
                    </div>
                `).join('');

                if (!Array.isArray(motions)) {
                    console.error("showMotions asteapta un array, a primit:", typeof motions);
                    motions = [];
                }

                // AdƒÉugƒÉm event listener pentru copiere
                resultDiv.addEventListener('click', handleMotionClick);
                }

                    // Handler pentru click pe mo»õiune
            function handleMotionClick(event) {
                const motionElement = event.target.closest('.motion');
                if (!motionElement) return;

                // IgnorƒÉ click-urile pe butonul de infoslide
                if (event.target.closest('.infoslide-toggle')) return;

                const textToCopy = motionElement.querySelector('.motion-text').textContent;
                copyToClipboard(textToCopy, motionElement);
            }

            // Func»õie de copiere √Æn clipboard cu feedback
            function copyToClipboard(text, element) {
                navigator.clipboard.writeText(text)
                    .then(() => {
                        element.classList.add('copied');
                        setTimeout(() => element.classList.remove('copied'), 500);
                    })
                    .catch(err => console.error('Eroare la copiere:', err));
            }



                function toggleInfoslide(button) {
                    const content = button.nextElementSibling;
                    content.style.display = content.style.display === 'block' ? 'none' : 'block';
                }

                function clearResults() {
                    document.getElementById('result').innerHTML = '';
                }

                // Actualizare counter
                function updateCounter(count) {
                    let counter = document.querySelector('.motion-count');
                    if (!counter) {
                        counter = document.createElement('div');
                        counter.className = 'motion-count';
                        document.body.appendChild(counter);
                    }
                    counter.textContent = `Mo»õiuni gƒÉsite: ${isNaN(count) ? 0 : count}`;
                }

                // Handler modificare filtre
                function handleFilterChange() {
                    if (currentTab === 'list') {
                        updateResults();
                    } else {
                        updateCounter(filterMotions().length);
                    }
                }

                document.getElementById('advancedFilterToggle').addEventListener('change', () => {
                    const isChecked = document.getElementById('advancedFilterToggle').checked;
                    document.getElementById('advancedFilters').style.display = isChecked ? 'block' : 'none';
                    handleFilterChange();
                });

                // Pornire aplica»õie
                document.addEventListener('DOMContentLoaded', init);
        </script>
        <div id="version">v.302</div>
    </body>
</html>
